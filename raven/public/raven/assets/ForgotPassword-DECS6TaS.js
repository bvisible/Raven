var E=Object.defineProperty,S=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var h=(a,s,e)=>s in a?E(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e,g=(a,s)=>{for(var e in s||(s={}))w.call(s,e)&&h(a,e,s[e]);if(x)for(var e of x(s))C.call(s,e)&&h(a,e,s[e]);return a},j=(a,s)=>S(a,P(s));var f=(a,s,e)=>new Promise((o,i)=>{var u=t=>{try{n(e.next(t))}catch(l){i(l)}},m=t=>{try{n(e.throw(t))}catch(l){i(l)}},n=t=>t.done?o(t.value):Promise.resolve(t.value).then(u,m);n((e=e.apply(a,s)).next())});import{g as v,u as L,r as q,V as z,j as r,l as F,p as V,a as d,L as k,b as N,c as R,o as T,d as A,e as U,f as _}from"./index-CIYKedxU.js";import{S as B}from"./SuccessCallout-BILcc-6r.js";import{i as I}from"./validations-DJFqvO1k.js";import{A as M}from"./AuthContainer-I6QVINkr.js";const $=()=>{var p;const{appearance:a}=v(),{register:s,handleSubmit:e,formState:{errors:o,isSubmitting:i}}=L(),[u,m]=q.useState(null),{call:n,error:t}=z("frappe.core.doctype.user.user.reset_password");function l(c){return f(this,null,function*(){return n({user:c.user}).then(b=>{m({state:!0,message:"Password reset instructions have been sent to your email."})}).catch(b=>{m(null)})})}const y=c=>c.exc_type==="ValidationError"?"Too many requests. Please try after some time.":"User does not exist. Please Sign Up.";return r.jsxs(M,{children:[t&&r.jsx(F,{message:y(t)}),u&&r.jsx(B,{message:u.message}),r.jsx(V,{children:r.jsx("form",{onSubmit:e(l),children:r.jsxs(d,{direction:"column",gap:"4",children:[r.jsxs(d,{direction:"column",gap:"2",children:[r.jsx(k,{htmlFor:"user",isRequired:!0,size:"3",children:"Email"}),r.jsx(N,j(g({},s("user",{validate:c=>I(c)||"Please enter a valid email address.",required:"Email is required."})),{name:"user",type:"email",size:"3",placeholder:"jane@example.com",color:"gray",variant:a==="dark"?"soft":void 0,tabIndex:0,autoFocus:!0})),(o==null?void 0:o.user)&&r.jsx(R,{children:(p=o==null?void 0:o.user)==null?void 0:p.message})]}),r.jsx(d,{direction:"column",gap:"2",mt:"2",children:r.jsx(T,{type:"submit",disabled:i,size:"3",className:"not-cal font-medium",children:i?r.jsx(A,{className:"text-white"}):"Reset Password"})}),r.jsx(d,{direction:"column",gap:"1",align:"center",children:r.jsx(U,{size:"2",color:"gray",asChild:!0,children:r.jsx(_,{to:"/login",children:"Back to Login"})})})]})})})]})};$.displayName="ForgotPassword";export{$ as Component};
