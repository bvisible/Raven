var k=Object.defineProperty,g=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var m=(s,e,t)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e)=>{for(var t in e||(e={}))h.call(e,t)&&m(s,t,e[t]);if(d)for(var t of d(e))A.call(e,t)&&m(s,t,e[t]);return s},l=(s,e)=>g(s,R(e));import{r as a,cj as C,bT as D,g as $,P as F,bD as b,j as o}from"./index-Y1VVLmGB.js";import{A as w}from"./AddCustomEmojiDialog-CXqDAMVy.js";function P(s){const e=a.useRef(null),t=a.useRef(null);return t.current&&t.current.update(s),a.useEffect(()=>(t.current=new C(l(f({},s),{ref:e})),()=>{t.current=null}),[]),D.createElement("div",{ref:e})}const I=({onSelect:s,allowCustomEmojis:e=!0})=>{const{appearance:t}=$(),[p,i]=a.useState(!1),v=n=>{n.native?s(n.native,!1):s(n.src,!0,n.id)},u=F(),{data:r,mutate:x}=b("Raven Custom Emoji",{fields:["name","image","keywords"],limit:1e3},e?"custom-emojis":null,{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1}),E=n=>{i(!1),n&&x()},j=a.useMemo(()=>{if(e&&r)return[{id:"Custom",name:"Custom",emojis:r.map(n=>{var c;return{id:n.name,name:n.name,keywords:(c=n.keywords)==null?void 0:c.split(","),skins:[{src:n.image}]}})}]},[r,e]);return o.jsxs(o.Fragment,{children:[o.jsx(P,{maxFrequentRows:2,set:"apple",custom:j,onEmojiSelect:v,onAddCustomEmoji:e?()=>i(!0):void 0,skinTonePosition:"search",theme:t==="inherit"?"auto":t,autoFocus:u,showPreview:u}),o.jsx(w,{open:p,onClose:E})]})};export{I as default};
