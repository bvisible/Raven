var d=Object.defineProperty,y=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var h=(t,n,r)=>n in t?d(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,f=(t,n)=>{for(var r in n||(n={}))x.call(n,r)&&h(t,r,n[r]);if(l)for(var r of l(n))S.call(n,r)&&h(t,r,n[r]);return t},a=(t,n)=>y(t,b(n));import{bm as p,u as $,bJ as g,r as E,j as o,ai as j,o as _,d as C,E as q,a3 as w}from"./index-DLbNAGlT.js";import{S as D}from"./SchedulerEventsForm-DNsRoIJm.js";import{P,S as k,a as M}from"./SettingsContentContainer-PpMfRXsE.js";import"./WebhookForm-Dk4O_ARN.js";import"./table-ClMmNz5D.js";import"./tabs-DNCG8JUF.js";import"./ServerScriptNotEnabledForm-iaUwd3-T.js";const F=()=>{const t=p(),n=$({defaultValues:{day:"1"}}),{createDoc:r,error:v,loading:m}=g(),u=e=>{var c;let s="";e.event_frequency==="Every Day"&&(s=`${e.minute} ${e.hour} * * *`),e.event_frequency==="Every Day of the week"&&(s=`${e.minute} ${e.hour} * * ${e.day}`),e.event_frequency==="Date of the month"&&(s=`${e.minute} ${e.hour} ${e.date} * *`),e.event_frequency==="Cron"&&(s=`${e.minute} ${e.hour} ${e.date} ${e.month} ${e.day}`),r("Raven Scheduler Event",{event_name:e.event_name,disabled:0,send_to:e.send_to,channel:(c=e.channel)!=null?c:"",dm:e.dm?e.dm:"",bot:e.bot,event_frequency:e.event_frequency,cron_expression:s,content:e.content}).then(i=>{i&&t(`../${i==null?void 0:i.name}`),w.success("Scheduled Message created")})};return E.useEffect(()=>{const e=s=>{s.key==="s"&&(s.metaKey||s.ctrlKey)&&(s.preventDefault(),n.handleSubmit(u)())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),o.jsx(P,{children:o.jsx("form",{onSubmit:n.handleSubmit(u),children:o.jsx(j,a(f({},n),{children:o.jsxs(k,{children:[o.jsx(M,{title:"Create a Scheduled Message",actions:o.jsxs(_,{type:"submit",disabled:m,children:[m&&o.jsx(C,{className:"text-white"}),m?"Creating":"Create"]}),breadcrumbs:[{label:"Scheduled Message",href:"../"},{label:"New Scheduled Message",href:""}]}),o.jsx(q,{error:v}),o.jsx(D,{})]})}))})})},z=F;export{z as Component};
