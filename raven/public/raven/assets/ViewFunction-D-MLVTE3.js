var j=Object.defineProperty,f=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var u=(t,e,s)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,l=(t,e)=>{for(var s in e||(e={}))v.call(e,s)&&u(t,s,e[s]);if(d)for(var s of d(e))S.call(e,s)&&u(t,s,e[s]);return t},p=(t,e)=>f(t,F(e));import{bx as y,by as g,j as o,E as x,F as E,ah as C,u as w,r as P,ai as L,ax as k,o as D,d as I,a3 as N}from"./index-93kECIxS.js";import{F as R}from"./FunctionForm-BetUB81b.js";import{C as A}from"./CommonSettingsMenu-C2aFC3AS.js";import{P as V,S as B,a as H}from"./SettingsContentContainer-Df6uZS-7.js";import{a as K}from"./validations-DJFqvO1k.js";import"./switch-txWPlp9Y.js";import"./AINotEnabledCallout-DHulyDzA.js";import"./useRavenSettings-3Tg7OUeN.js";import"./useDoctypeMeta-C0Qoed5I.js";import"./DoctypeVariableDialogForm-OfptV_xQ.js";import"./tabs-DsY8ua36.js";import"./DeleteAlert-CjKv61hf.js";const M=t=>{const{ID:e}=y(),{data:s,isLoading:a,error:m,mutate:n}=g("Raven AI Function",e);return o.jsxs(V,{children:[o.jsx(x,{error:m}),a&&o.jsx(E,{className:"h-64"}),s&&o.jsx(T,{data:s,mutate:n})]})},T=({data:t,mutate:e})=>{const{updateDoc:s,loading:a,error:m}=C(),n=w({disabled:a,defaultValues:t}),{formState:{dirtyFields:b}}=n,h=!K(b),c=i=>{s("Raven AI Function",i.name,i).then(r=>{N.success("Saved"),n.reset(r),e(r,{revalidate:!1})})};return P.useEffect(()=>{const i=r=>{r.key==="s"&&(r.metaKey||r.ctrlKey)&&(r.preventDefault(),n.handleSubmit(c)())};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[]),o.jsx("form",{onSubmit:n.handleSubmit(c),children:o.jsx(L,p(l({},n),{children:o.jsxs(B,{children:[o.jsx(H,{title:t.name,headerBadges:h?[{label:"Not Saved",color:"red"}]:void 0,actions:o.jsxs(k,{children:[o.jsx(A,{doctype:"Raven AI Function",docname:t.name,label:"Function"}),o.jsxs(D,{type:"submit",disabled:a,children:[a&&o.jsx(I,{className:"text-white"}),a?"Saving":"Save"]})]}),breadcrumbs:[{label:"Functions",href:"../"},{label:t.name,href:"",copyToClipboard:!0}]}),o.jsx(x,{error:m}),o.jsx(R,{isEdit:!0})]})}))})},ee=M;export{ee as Component};
