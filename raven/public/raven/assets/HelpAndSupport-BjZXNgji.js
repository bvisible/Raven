var E=Object.defineProperty,L=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var q=(a,s,t)=>s in a?E(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,b=(a,s)=>{for(var t in s||(s={}))V.call(s,t)&&q(a,t,s[t]);if(H)for(var t of H(s))I.call(s,t)&&q(a,t,s[t]);return a},f=(a,s)=>L(a,M(s));import{j as e,a6 as O,aa as B,M as F,ab as D,aB as W,u as Q,V as Y,au as Z,av as G,S as d,aP as U,a as n,de as K,i,df as J,dg as X,c as v,p as R,L as N,b as ee,bu as se,ax as ae,ay as te,o as z,d as ie,e as l,a3 as re,r as p,h as ne,dh as oe,x as le,l as ce,aA as $,n as de,di as ue,dj as pe,bl as he,dk as me,O as A,bK as k,bV as xe}from"./index-R8dcyEON.js";import{P as ge,S as je,a as ye}from"./SettingsContentContainer-BMUEmzAQ.js";import{p as be,i as w}from"./radio-cards-CyHWSkiF.js";const h={Feedback:{heading:"Send feedback",subHeading:"How can we improve Raven? If you have a feature request, can you also share how you would use it and why it's important to you?",defaultTextAreaValue:"What if...",footerHeading:e.jsxs("span",{children:["You can also email us at ",e.jsx(l,{href:"mailto:support@thecommit.company",underline:"none",size:"1",target:"_blank",children:"support@thecommit.company"}),". We can't respond to every request but we read all of them."]})},Question:{heading:"Ask a question",subHeading:"How can we help? Please share any relevant information we may need to answer your question.",defaultTextAreaValue:"How do I...",footerHeading:e.jsxs("span",{children:["You can also email us at ",e.jsx(l,{href:"mailto:support@thecommit.company",underline:"none",size:"1",target:"_blank",children:"support@thecommit.company"})]})},Bug:{heading:"Contact us",subHeading:"What is the issue? If you're reporting a bug, what are the steps you took so we can reproduce the behaviour?",defaultTextAreaValue:"Something seems wrong...",footerHeading:e.jsxs("span",{children:["You can also email us at ",e.jsx(l,{href:"mailto:support@thecommit.company",underline:"none",size:"1",target:"_blank",children:"support@thecommit.company"})]})}},fe=({open:a,onClose:s})=>e.jsx(O,{open:a,onOpenChange:s,children:e.jsx(B,{maxWidth:"700px",className:F(D),children:e.jsx(ke,{onClose:s})})}),ve=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ke=({onClose:a})=>{var C,T;const{name:s}=W(),{control:t,register:u,formState:{errors:r},handleSubmit:m,watch:x}=Q({defaultValues:{ticket_type:"Feedback",email:ve.test(s!=null?s:"")?s:""}}),c=x("ticket_type"),{call:g,error:S,loading:j}=Y("raven.api.support_request.submit_support_request"),P=o=>{var _;const y=`Raven: v${frappe==null?void 0:frappe.boot.versions.raven}, Frappe: v${frappe==null?void 0:frappe.boot.versions.frappe}, ERPNext: v${(_=frappe==null?void 0:frappe.boot.versions.erpnext)!=null?_:"N/A"}`;g({email:o.email,ticket_type:o.ticket_type,subject:o.description.substring(0,140),description:o.description+`<br><br>${y}`}).then(()=>{re.success("Form submitted successfully!"),a()})};return e.jsxs("form",{onSubmit:m(P),children:[e.jsx(Z,{children:h[c].heading}),e.jsx(G,{size:"2",className:"min-h-10 select-none",children:h[c].subHeading}),e.jsxs(d,{gap:"2",pt:"3",children:[e.jsx(U,{name:"ticket_type",control:t,rules:{required:"Request type is required",validate:o=>Object.keys(h).includes(o)||"Invalid request type"},render:({field:{onChange:o,value:y}})=>e.jsxs(be,{value:y,onValueChange:o,children:[e.jsx(w,{value:"Feedback",children:e.jsx(n,{direction:"column",width:"100%",gap:"1",children:e.jsxs(n,{align:"center",gap:"3",children:[e.jsx(K,{size:"16"}),e.jsx(i,{weight:"bold",children:"Feedback"})]})})}),e.jsx(w,{value:"Question",children:e.jsx(n,{direction:"column",width:"100%",gap:"1",children:e.jsxs(n,{align:"center",gap:"3",children:[e.jsx(J,{size:"16"}),e.jsx(i,{weight:"bold",children:"Question"})]})})}),e.jsx(w,{value:"Bug",children:e.jsx(n,{direction:"column",width:"100%",gap:"1",children:e.jsxs(n,{align:"center",gap:"3",children:[e.jsx(X,{size:"16"}),e.jsx(i,{weight:"bold",children:"Bug"})]})})})]})}),r.ticket_type&&e.jsx(v,{children:r.ticket_type.message}),e.jsxs(d,{children:[e.jsxs(R,{children:[e.jsx(N,{htmlFor:"email",isRequired:!0,children:"Email"}),e.jsx(ee,f(b({id:"email"},u("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{type:"email",placeholder:"email@example.com","aria-invalid":r.email?"true":"false"}))]}),r.email&&e.jsx(v,{children:(C=r.email)==null?void 0:C.message})]}),e.jsxs(d,{children:[e.jsxs(R,{children:[e.jsx(N,{htmlFor:"description",isRequired:!0,children:"Description"}),e.jsx(se,f(b({id:"description"},u("description",{required:"Description is required",minLength:{value:10,message:"Description must be at least 10 characters"}})),{rows:5,resize:"vertical",placeholder:h[c].defaultTextAreaValue,"aria-invalid":r.description?"true":"false"}))]}),r.description&&e.jsx(v,{children:(T=r.description)==null?void 0:T.message})]}),e.jsxs(ae,{justify:"between",pt:"4",gap:"9",children:[e.jsx(i,{color:"gray",size:"1",className:"select-none",children:h[c].footerHeading}),e.jsxs(n,{gap:"2",children:[e.jsx(te,{children:e.jsx(z,{color:"gray",variant:"soft",disabled:j&&!S,children:"Cancel"})}),e.jsxs(z,{type:"submit",disabled:j,children:[j&&!S?e.jsx(ie,{className:"text-white"}):null,"Submit"]})]})]})]})]})},we=()=>{const{socket:a}=p.useContext(ne),[s,t]=p.useState(!0),[u,r]=p.useState("Fail"),[m,x]=p.useState("");oe("pong",()=>{r("Pass"),t(!1),x(a==null?void 0:a.io.engine.transport.name)});const c=()=>{t(!0),a==null||a.emit("ping"),setTimeout(()=>{t(!1),x(g=>g||"")},5e3)};return p.useEffect(()=>{setTimeout(c,5e3)},[]),e.jsxs(d,{children:[e.jsx(le,{as:"h3",size:"3",className:"not-cal font-semibold",children:"Realtime Connection Test"}),e.jsx(i,{size:"2",color:"gray",children:"If messages on Raven do not appear in realtime, you can inspect your network connection here."}),!s&&u==="Fail"&&e.jsx(ce,{message:"Realtime connections are not working on your site. Messages won't be refreshed in real-time."}),e.jsxs(n,{gap:"3",align:"center",pt:"2",children:[e.jsx(i,{size:"2",color:"gray",as:"span",children:"Real-time Ping Check:"}),e.jsxs(n,{align:"center",gap:"2",children:[e.jsx($,{color:s?"gray":u==="Pass"?"green":"red",children:s?"Loading...":u}),!s&&e.jsx(de,{title:"Send a ping","aria-label":"send a ping",color:"gray",size:"1",variant:"ghost",onClick:c,children:e.jsx(ue,{className:F(s?"animate-spin":null),size:12})})]})]}),m&&e.jsxs(n,{gap:"2",align:"center",children:[e.jsx(i,{size:"2",color:"gray",as:"span",children:"SocketIO Transport Mode:"}),e.jsx($,{color:"orange",children:m})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(l,{underline:"always",size:"2",target:"_blank",title:"System Health Report",href:"/app/system-health-report",children:[e.jsx(pe,{size:"16",className:"-mb-0.5 pr-1"}),"View Full System Health Report"]})})]})},ze=()=>{const[a,{on:s,off:t}]=he();return e.jsxs(ge,{children:[e.jsxs(je,{children:[e.jsx(ye,{title:"Help and Support"}),e.jsxs(d,{gap:"5",children:[e.jsxs(d,{children:[e.jsx(i,{color:"gray",size:"2",as:"span",className:"font-medium",children:"Have ideas or ran into an issue?"}),e.jsx("div",{children:e.jsxs(z,{size:"2",onClick:s,variant:"outline",color:"gray",className:"not-cal cursor-pointer",title:"Click here to send us feedback or file an issue","aria-label":"click here to send us feedback or file an issue",children:[e.jsx(me,{}),"  Contact Us"]})})]}),e.jsx(A,{size:"4"}),e.jsx(we,{}),e.jsx(A,{size:"4"}),e.jsxs("ul",{className:"list-none",children:[e.jsx("li",{children:e.jsxs(l,{color:"gray",underline:"always",size:"2",target:"_blank",title:"https://github.com/The-Commit-Company/raven",href:"https://github.com/The-Commit-Company/raven",children:["GitHub ",e.jsx(k,{size:"12"})]})}),e.jsx("li",{children:e.jsxs(l,{color:"gray",underline:"always",size:"2",target:"_blank",title:"https://community.ravenapp.cloud",href:"https://community.ravenapp.cloud",children:["Community ",e.jsx(k,{size:"12"})]})}),e.jsx("li",{children:e.jsxs(l,{color:"gray",underline:"always",size:"2",target:"_blank",title:"https://ravenchat.ai",href:"https://ravenchat.ai",children:["Website ",e.jsx(k,{size:"12"})]})}),e.jsx("li",{children:e.jsx(l,{underline:"always",size:"2",target:"_blank",color:"gray",title:"support@thecommit.company",href:"mailto:support@thecommit.company",children:"Support Email"})})]}),e.jsxs(d,{gap:"0",children:[e.jsxs(i,{size:"3",color:"gray",children:[e.jsx(i,{size:"5",className:"cal-sans text-gray-12 dark:text-white",children:"raven"})," ",e.jsxs(xe,{size:"2",variant:"ghost",children:["v",frappe==null?void 0:frappe.boot.versions.raven]})]}),e.jsx(i,{size:"2",color:"gray",children:"Crafted by The Commit Company"})]})]})]}),e.jsx(fe,{open:a,onClose:t})]})},He=ze;export{He as Component};
