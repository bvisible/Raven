var N=Object.defineProperty,P=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(s,o,a)=>o in s?N(s,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[o]=a,u=(s,o)=>{for(var a in o||(o={}))O.call(o,a)&&f(s,a,o[a]);if(g)for(var a of g(o))R.call(o,a)&&f(s,a,o[a]);return s},m=(s,o)=>P(s,F(o));var k=(s,o,a)=>new Promise((t,n)=>{var b=r=>{try{c(a.next(r))}catch(i){n(i)}},h=r=>{try{c(a.throw(r))}catch(i){n(i)}},c=r=>r.done?t(r.value):Promise.resolve(r.value).then(b,h);c((a=a.apply(s,o)).next())});import{u as $,ah as A,r as y,j as e,ai as B,ax as V,ak as I,al as T,n as U,bk as H,an as K,ao as _,o as j,d as v,E as p,ad as z,ag as G,ab as q,a0 as J,i as E,a as S,a1 as M,a2 as Q,a3 as C,bx as X,by as Y,F as Z}from"./index-3Ycoded3.js";import{W as ee}from"./WebhookForm-qQ8dYdZi.js";import{a as se}from"./validations-DJFqvO1k.js";import{S as ae,a as oe,P as ne}from"./SettingsContentContainer-B70kiGi-.js";import"./table-DrC99LcT.js";import"./tabs-DXfZPLYu.js";const re=({data:s,mutate:o})=>{const a=$({defaultValues:m(u({},s),{docstatus:s.docstatus})}),{updateDoc:t,loading:n,reset:b,error:h}=A(),{formState:{dirtyFields:c}}=a,r=!se(c),i=d=>k(null,null,function*(){return t("Raven Webhook",d.name,d).then(l=>{C.success("Webhook updated"),b(),o(),l&&a.reset(m(u({},l),{docstatus:l.docstatus}))})}),[D,x]=y.useState(!1),W=()=>{x(!1)},w=()=>{t("Raven Webhook",s.name,{enabled:!s.enabled}).then(()=>{C.success(`Webhook ${s.enabled?"disabled":"enabled"}`),b(),o()})};y.useEffect(()=>{const d=l=>{l.key==="s"&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),a.handleSubmit(i)())};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[]);const L=s!=null&&s.enabled?[{label:"Enabled",color:"green"}]:[{label:"Disabled",color:"gray"}];return e.jsx("form",{onSubmit:a.handleSubmit(i),children:e.jsx(B,m(u({},a),{children:e.jsxs(ae,{children:[e.jsx(oe,{title:s.name,headerBadges:r?[{label:"Not Saved",color:"red"}]:L,actions:e.jsxs(V,{children:[e.jsxs(I,{children:[e.jsx(T,{children:e.jsx(U,{"aria-label":"Options",variant:"surface",color:"gray",children:e.jsx(H,{})})}),e.jsx(K,{className:"min-w-32",children:e.jsx(_,{color:"gray",onClick:()=>x(!0),children:s.enabled?"Disable":"Enable"})})]}),e.jsxs(j,{type:"submit",disabled:n,children:[n&&e.jsx(v,{}),n?"Saving":"Save"]})]}),breadcrumbs:[{label:"Webhooks",href:"../"},{label:s.name,href:"",copyToClipboard:!0}]}),e.jsx(p,{error:h}),e.jsx(ee,{isEdit:!0}),e.jsx(z,{open:D,onOpenChange:x,children:e.jsxs(G,{className:q,children:[e.jsx(J,{children:e.jsxs(E,{children:[s.enabled?"Disable":"Enable"," Webhook"]})}),e.jsxs(S,{direction:"column",gap:"2",children:[e.jsx(p,{error:h}),e.jsxs(E,{size:"2",children:["Are you sure you want to ",s.enabled?"disable":"enable"," this webhook?"]})]}),e.jsxs(S,{gap:"3",mt:"4",justify:"end",children:[e.jsx(M,{children:e.jsx(j,{variant:"soft",color:"gray",onClick:W,children:"Cancel"})}),e.jsx(Q,{children:e.jsxs(j,{variant:"solid",color:s.enabled?"red":void 0,onClick:w,disabled:n,children:[n&&e.jsx(v,{}),n?"Updating":s.enabled?"Disable":"Enable"]})})]})]})})]})}))})},le=()=>{const{ID:s}=X(),{data:o,error:a,isLoading:t,mutate:n}=Y("Raven Webhook",s,void 0,{shouldRetryOnError:!1});return e.jsxs(ne,{children:[t&&e.jsx(Z,{className:"h-64"}),a&&e.jsx(p,{error:a}),o&&e.jsx(re,{data:o,mutate:n})]})},me=le;export{me as Component};
