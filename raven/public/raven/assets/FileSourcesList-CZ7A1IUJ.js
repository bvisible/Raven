import{aQ as u,az as g,bD as f,j as e,E as h,c1 as y,o as d,r as S,br as b,e as A,aA as v,i as F,cf as C,n as E,bW as N,ad as D,ag as T,a0 as k,bs as R,S as I,ax as _,a1 as P,bf as W}from"./index-Ck93fVfS.js";import{A as L}from"./AINotEnabledCallout-xLkSDs0r.js";import{F as U}from"./FileSourceUploadDialog-Bafo6ghr.js";import{E as $,a as B,b as w,c as z}from"./EmptyListViewState--GTcpSjs.js";import{T as H}from"./TableLoader-NknXZsmj.js";import{P as q,S as M,a as O}from"./SettingsContentContainer-BFq_61jI.js";import{m as Q,d as Y,P as m,f as o,b as G,T as c}from"./table-ClxEMtkD.js";import"./useRavenSettings-F70ePwVt.js";import"./Skeleton-_lUtTwSR.js";const J=t=>{const r=u()||g(),{data:s,isLoading:n,error:l,mutate:i}=f("Raven AI File Source",{fields:["name","file_name","file","file_type","creation"],orderBy:{field:"modified",order:"desc"}},r?void 0:null,{errorRetryCount:2});return e.jsx(q,{children:e.jsxs(M,{children:[e.jsx(O,{title:"File Sources",description:"Add files that can be used by AI Agents.",actions:r?e.jsx(U,{onUpload:()=>i()}):void 0}),n&&!l&&e.jsx(H,{columns:2}),e.jsx(h,{error:l}),e.jsx(L,{}),s&&s.length>0&&e.jsx(K,{data:s,mutate:i}),((s==null?void 0:s.length)===0||!r)&&e.jsxs($,{children:[e.jsx(B,{children:e.jsx(y,{})}),e.jsx(w,{children:"File Sources"}),e.jsx(z,{children:"AI Agents can use files as data sources to get more context, read instructions and execute tasks. You can upload files here and use them across multiple agents."}),r&&e.jsx(d,{asChild:!0,className:"not-cal",children:"Upload a file"})]})]})})},K=({data:t,mutate:r})=>{const[s,n]=S.useState(),{deleteDoc:l,loading:i,error:x}=b(),j=()=>{s&&l("Raven AI File Source",s.name).then(()=>{n(void 0),r()})},p=a=>{a||n(void 0)};return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{variant:"surface",className:"rounded-sm animate-fadein",children:[e.jsx(Y,{children:e.jsxs(m,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Uploaded"}),e.jsx(o,{})]})}),e.jsx(G,{children:t==null?void 0:t.map(a=>e.jsxs(m,{className:"hover:bg-gray-2 dark:hover:bg-gray-3",children:[e.jsx(c,{maxWidth:"250px",children:e.jsx(A,{href:a.file,target:"_blank",color:"gray",underline:"always",className:"text-gray-12",children:a.file_name})}),e.jsx(c,{maxWidth:"250px",children:e.jsx(v,{color:"gray",className:"uppercase",children:a.file_type})}),e.jsx(c,{maxWidth:"250px",children:e.jsx(F,{className:"line-clamp-1 text-ellipsis",children:C(a.creation)})}),e.jsx(c,{maxWidth:"80px",align:"right",children:e.jsx(E,{onClick:()=>n(a),color:"red",variant:"soft",size:"1",className:"not-cal",title:"Delete","aria-label":"Delete",children:e.jsx(N,{})})})]},a.name))})]}),e.jsx(D,{open:!!s,onOpenChange:p,children:e.jsxs(T,{children:[e.jsx(k,{children:"Delete File?"}),e.jsxs(R,{children:["Are you sure you want to delete the file ",e.jsx("strong",{children:s==null?void 0:s.file_name}),"?"]}),e.jsxs(I,{gap:"2",pt:"4",children:[x&&e.jsx(h,{error:x}),e.jsxs(_,{justify:"end",gap:"2",pt:"2",children:[e.jsx(P,{children:e.jsx(d,{variant:"soft",color:"gray",className:"not-cal",children:"Cancel"})}),e.jsx(d,{color:"red",className:"not-cal",onClick:j,disabled:i,children:i?e.jsx(W,{}):"Delete"})]})]})]})})]})},te=J;export{te as Component};
