import{aQ as T,az as R,r as P,v as _,V as b,j as e,bY as p,bZ as u,cd as y,b_ as f,o as j,ce as B,S as d,a3 as m,i as r,aj as L,a as c,n as V,bq as O,aA as z,ad as F,ag as G,a0 as I,bs as Y,a1 as q,a2 as H,b$ as M}from"./index-R8dcyEON.js";import{A as Q}from"./AINotEnabledCallout-BwfGQB1C.js";import{P as v,S as N,a as w}from"./SettingsContentContainer-BMUEmzAQ.js";import{r as g}from"./skeleton-CumY7mT4.js";import{p as W,i as Z}from"./radio-cards-CyHWSkiF.js";import"./useRavenSettings-BruiZaC6.js";const J=()=>{const l=T()||R(),[n,i]=P.useState(""),{data:x,isLoading:t,error:a,mutate:s}=_("raven.ai.google_ai.get_list_of_processors",void 0,void 0,{revalidateOnFocus:!1}),{call:o,loading:h}=b("raven.ai.google_ai.create_document_processor"),{call:C,loading:A}=b("raven.ai.google_ai.delete_document_processor"),E=()=>{!n||!l||o({processor_type_key:n}).then(()=>{s(),m.success("Processor created successfully",{description:"The processor has been created and is now available to use."}),i("")})},S=($,D)=>{C({processor_id:$}).then(()=>{s(),m.success("Processor deleted successfully",{description:`${D} has been deleted from your Google Cloud project.`})}).catch(k=>{m.error("Failed to delete processor",{description:k.message})})};return l?e.jsx(v,{children:e.jsxs(N,{children:[e.jsx(w,{title:"Document Processors",description:"View your active document processors or select a processor type and create a new processor.",actions:e.jsxs(j,{onClick:E,disabled:!n||h,loading:h,children:[e.jsx(B,{}),"Create Processor"]})}),e.jsx(Q,{}),e.jsxs(d,{gap:"6",children:[e.jsx(K,{processors:(x==null?void 0:x.message)||[],isLoading:t,error:a,onDeleteProcessor:S,isDeletingProcessor:A}),e.jsx(U,{selectedProcessorType:n,setSelectedProcessorType:i})]})]})}):e.jsx(v,{children:e.jsxs(N,{children:[e.jsx(w,{title:"Document Processors",description:"Create and manage document processors for your bots."}),e.jsxs(p,{color:"amber",children:[e.jsx(u,{children:e.jsx(y,{})}),e.jsx(f,{children:"You need Raven Admin permissions to manage document processors."})]})]})})},K=({processors:l,isLoading:n,error:i,onDeleteProcessor:x,isDeletingProcessor:t})=>{const[a,s]=P.useState(null);return n?e.jsxs(d,{gap:"2",children:[e.jsx(g,{className:"h-16 w-full"}),e.jsx(g,{className:"h-16 w-full"})]}):i?e.jsxs(p,{color:"red",children:[e.jsx(u,{children:e.jsx(y,{})}),e.jsxs(f,{children:["Error loading processors: ",i.message]})]}):l.length===0?e.jsxs(d,{gap:"2",children:[e.jsxs(r,{size:"3",weight:"medium",children:["Active Processors (",l.length,")"]}),e.jsx(r,{size:"2",className:"text-gray-11",children:"No processors created yet. Select a type below to create your first processor."})]}):e.jsxs(d,{gap:"3",children:[e.jsxs(r,{size:"3",weight:"medium",children:["Active Processors (",l.length,")"]}),e.jsx(d,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:l.map(o=>e.jsx(L,{className:"p-3",children:e.jsxs(d,{gap:"2",children:[e.jsxs(c,{justify:"between",align:"center",children:[e.jsx(r,{size:"2",weight:"bold",className:"truncate pr-8",children:o.display_name}),e.jsx(V,{size:"1",variant:"ghost",color:"red",onClick:()=>s(o),disabled:t,className:"hover:bg-red-3",children:e.jsx(O,{})})]}),e.jsx(r,{size:"1",color:"gray",className:"truncate",children:o.type}),e.jsx(z,{color:o.state?"green":"red",variant:"soft",size:"1",className:"self-start",children:o.state?"Active":"Inactive"})]})},o.id))}),e.jsx(F,{open:!!a,onOpenChange:o=>!o&&s(null),children:e.jsxs(G,{style:{maxWidth:450},children:[e.jsx(I,{children:"Delete Processor"}),e.jsxs(Y,{size:"2",children:[e.jsxs(r,{size:"2",children:["Are you sure you want to delete ",e.jsx("strong",{children:a==null?void 0:a.display_name}),"?"]}),e.jsx("br",{}),e.jsx(r,{size:"1",children:"This will permanently remove the processor from your Google Cloud project. Any agents currently using this document processor will no longer be able to use it."})]}),e.jsxs(c,{gap:"3",mt:"4",justify:"end",children:[e.jsx(q,{children:e.jsx(j,{variant:"soft",color:"gray",disabled:t,children:"Cancel"})}),e.jsx(H,{children:e.jsx(j,{variant:"solid",color:"red",loading:t,onClick:()=>{a&&(x(a.id,a.display_name),s(null))},children:"Delete Processor"})})]})]})})]})},U=({selectedProcessorType:l,setSelectedProcessorType:n})=>{const{data:i,isLoading:x,error:t}=_("raven.ai.google_ai.get_available_processor_types");return x?e.jsxs(d,{gap:"2",children:[e.jsx(g,{className:"h-20 w-full"}),e.jsx(g,{className:"h-20 w-full"}),e.jsx(g,{className:"h-20 w-full"})]}):t?e.jsxs(p,{color:"red",children:[e.jsx(u,{children:e.jsx(y,{})}),e.jsxs(f,{children:["Error loading processor types: ",t.message]})]}):i!=null&&i.message?e.jsxs(d,{gap:"3",children:[e.jsx(r,{size:"3",weight:"medium",children:"Create a new processor"}),e.jsx(W,{value:l,onValueChange:n,className:"flex flex-col gap-3",children:Object.entries(i.message).map(([a,s])=>e.jsx(Z,{value:a,className:"w-full cursor-pointer hover:bg-gray-2 transition-colors duration-200 border border-gray-6 rounded-md px-1 py-2",children:e.jsxs(c,{align:"center",className:"w-full p-4",gap:"0",children:[e.jsxs(c,{className:"w-1/4 px-2",align:"start",gap:"2",direction:"column",children:[e.jsx(r,{size:"3",weight:"bold",className:"text-gray-12 leading-tight",children:s.display_name}),e.jsx(z,{color:"gray",variant:"outline",size:"1",className:"w-fit",children:s.category})]}),e.jsxs(c,{className:"w-1/5 px-2",direction:"column",children:[e.jsx(r,{size:"3",className:"text-gray-12 leading-relaxed font-bold",children:s.pricing.split(" ")[0]}),e.jsx(r,{size:"2",className:"text-gray-10 leading-relaxed",children:s.pricing.split(" ").slice(1).join(" ")})]}),e.jsx(c,{className:"w-2/5 px-2",children:e.jsx(r,{size:"2",className:"text-gray-11 leading-relaxed",children:s.description})}),e.jsx(c,{className:"w-1/5 px-2",direction:"column",gap:"1",children:s.best_for.map((o,h)=>e.jsxs(c,{align:"center",gap:"2",children:[e.jsx(M,{className:"text-accent-9 flex-shrink-0",size:"16"}),e.jsx(r,{size:"2",className:"text-gray-11 leading-tight",children:o})]},h))})]})},a))})]}):null},ie=J;export{ie as Component};
