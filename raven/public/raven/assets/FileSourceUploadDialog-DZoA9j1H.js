var C=Object.defineProperty,L=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var F=(r,a,s)=>a in r?C(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,t=(r,a)=>{for(var s in a||(a={}))A.call(a,s)&&F(r,s,a[s]);if(h)for(var s of h(a))D.call(a,s)&&F(r,s,a[s]);return r},d=(r,a)=>L(r,R(a));import{r as b,j as e,a6 as I,a8 as k,o as u,aa as q,au as B,av as N,u as w,bB as z,bJ as O,S,E as g,bC as P,p as $,L as H,b as J,c as T,ax as V,ay as W,bf as G}from"./index-Bzdyr4lv.js";const X=({onUpload:r,buttonProps:a})=>{const[s,n]=b.useState(!1),l=o=>{r(o),n(!1)};return e.jsxs(I,{open:s,onOpenChange:n,children:[e.jsx(k,{children:e.jsx(u,d(t({},a),{type:"button",children:"Upload"}))}),e.jsxs(q,{children:[e.jsx(B,{children:"Upload File"}),e.jsx(N,{size:"2",children:"Upload a file to use as a data source for AI Agents."}),e.jsx(K,{onClose:l})]})]})},K=({onClose:r})=>{const{register:a,handleSubmit:s,formState:{errors:n},setValue:l}=w(),[o,x]=b.useState(),{upload:_,loading:m,error:p}=z(),{createDoc:v,loading:j,error:f}=O(),y=i=>{if(!o)return;const U="new-raven-ai-file-source-"+Date.now();_(o,{doctype:"Raven AI File Source",docname:U,fieldname:"file",isPrivate:!0}).then(c=>v("Raven AI File Source",d(t({},i),{file:c.file_url}))).then(c=>{r(c.name)})},E=i=>{i?(x(i),l("file_name",i.name.split(".")[0])):(x(void 0),l("file_name",""))};return e.jsxs(S,{gap:"4",children:[p&&e.jsx(g,{error:p}),f&&e.jsx(g,{error:f}),e.jsx(P,{file:o,onFileChange:E,hideIfLimitReached:!0,maxFileSize:10}),e.jsxs(S,{children:[e.jsxs($,{children:[e.jsx(H,{htmlFor:"file_name",isRequired:!0,children:"File Name"}),e.jsx(J,t({id:"file_name"},a("file_name",{required:"File name is required"})))]}),n.file_name&&e.jsx(T,{children:n.file_name.message})]}),e.jsxs(V,{justify:"end",pt:"2",children:[e.jsx(W,{children:e.jsx(u,{variant:"soft",color:"gray",type:"button",className:"not-cal",children:"Cancel"})}),e.jsx(u,{type:"button",className:"not-cal",disabled:m||j,onClick:s(y),children:m||j?e.jsx(G,{}):"Upload"})]})]})};export{X as F};
