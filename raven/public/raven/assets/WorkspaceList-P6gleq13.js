import{V as p,bd as u,j as e,ao as h,bh as f,a3 as g,ac as v,f as k,bi as _,bj as W,ak as y,al as C,n as S,bk as L,an as N,aO as A,E as B,aQ as T,bl as $,bm as z,a6 as w,a8 as O,o as P,aa as E,ab as M,au as R,av as V,S as I,bn as J,ax as l,a4 as j,i as d,aA as c,bo as D}from"./index-DhM1aug3.js";import{T as F}from"./TableLoader-8HqOeBd6.js";import{P as H,S as Y,a as G}from"./SettingsContentContainer-DRsK0C7S.js";import{m as Q,d as U,P as m,f as o,b as q,T as t}from"./table-DGmDSk0U.js";import"./Skeleton-CwvUWy7X.js";const K=({workspace:a})=>{const{call:s}=p("raven.api.workspaces.leave_workspace"),{mutate:n}=u(),r=()=>{g.promise(s({workspace:a.name}).then(()=>{n("workspaces_list"),n("channel_list")}),{loading:"Leaving workspace...",success:"You have left the workspace.",error:i=>`There was an error while leaving the workspace.
${v(i)}`})};return e.jsxs(h,{onClick:r,color:"red",children:[e.jsx(f,{fontSize:16}),"Leave"]})},X=a=>e.jsx(h,{asChild:!0,children:e.jsxs(k,{to:`${a.workspace.name}`,children:[e.jsx(_,{fontSize:16}),"Manage"]})}),Z=({workspace:a})=>{const{call:s}=p("raven.api.workspaces.join_workspace"),{mutate:n}=u(),r=()=>{g.promise(s({workspace:a.name}).then(()=>{n("workspaces_list"),n("channel_list")}),{loading:"Joining workspace...",success:"You have joined the workspace.",error:i=>`There was an error while joining the workspace.
${v(i)}`})};return e.jsxs(h,{onClick:r,children:[e.jsx(W,{fontSize:16}),"Join"]})},ee=({workspace:a})=>e.jsx("div",{className:"flex items-center gap-2 justify-center h-full",children:e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(S,{variant:"ghost",color:"gray",size:"3",children:e.jsx(L,{fontSize:16})})}),e.jsxs(N,{className:"min-w-36",children:[a.is_admin?e.jsx(X,{workspace:a}):null,a.workspace_member_name?e.jsx(K,{workspace:a}):e.jsx(Z,{workspace:a})]})]})}),se=()=>{const{data:a,isLoading:s,error:n}=A();return e.jsx(H,{children:e.jsxs(Y,{children:[e.jsx(G,{title:"Workspaces",description:"Workspaces allow you to organize your channels and teams.",actions:e.jsx(ne,{})}),s&&!n&&e.jsx(F,{columns:4}),e.jsx(B,{error:n}),a&&e.jsx(ae,{workspaces:a.message})]})})},ae=({workspaces:a})=>e.jsxs(Q,{variant:"surface",className:"rounded-sm",children:[e.jsx(U,{children:e.jsxs(m,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Membership"}),e.jsx(o,{children:"Description"}),e.jsx(o,{})]})}),e.jsx(q,{children:a==null?void 0:a.map(s=>e.jsxs(m,{children:[e.jsx(t,{maxWidth:"150px",children:s.is_admin?e.jsx(k,{to:`${s.name}`,className:"hover:underline underline-offset-4",children:e.jsxs(l,{align:"center",children:[e.jsx(j,{src:s.logo,alt:s.workspace_name}),e.jsx(d,{weight:"medium",children:s.workspace_name})]})}):e.jsxs(l,{align:"center",children:[e.jsx(j,{src:s.logo,alt:s.workspace_name}),e.jsx(d,{weight:"medium",children:s.workspace_name})]})}),e.jsx(t,{children:e.jsxs(c,{color:s.type==="Private"?"purple":"green",children:[e.jsx(D,{type:s.type==="Private"?"Private":"Open"}),s.type]})}),e.jsx(t,{children:e.jsx(l,{children:s.is_admin?e.jsx(c,{color:"orange",children:"Admin"}):s.workspace_member_name?e.jsx(c,{color:"blue",children:"Member"}):e.jsx(c,{color:"gray",children:"Not a member"})})}),e.jsx(t,{maxWidth:"250px",children:e.jsx(d,{className:"line-clamp-1 text-ellipsis",children:s.description})}),e.jsx(t,{children:e.jsx(ee,{workspace:s})})]},s.name))})]}),ne=()=>{const a=T(),[s,{off:n},r]=$(),i=z(),b=x=>{x&&i(`${x}`),n()};return e.jsxs(w,{open:s,onOpenChange:r,children:[e.jsx(O,{children:e.jsx(P,{disabled:!a,children:"Create"})}),e.jsxs(E,{className:M,children:[e.jsx(R,{children:"Create Workspace"}),e.jsx(V,{size:"2",children:"Workspaces allow you to organize your channels and teams."}),e.jsx(I,{children:e.jsx(J,{onClose:b})})]})]})},le=se;export{le as Component};
