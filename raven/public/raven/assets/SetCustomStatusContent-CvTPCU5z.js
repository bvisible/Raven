var y=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var j=(a,t,e)=>t in a?y(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,l=(a,t)=>{for(var e in t||(t={}))L.call(t,e)&&j(a,e,t[e]);if(x)for(var e of x(t))V.call(t,e)&&j(a,e,t[e]);return a},m=(a,t)=>C(a,F(t));import{aB as k,$ as w,u as O,V as $,r as B,j as s,au as N,_ as r,ai as P,E as U,a as n,L as z,b as D,m as R,n as T,as as q,c as A,ay as G,o as g,d as H,a3 as I}from"./index-3Ycoded3.js";import J from"./EmojiPicker-DDvsCNbE.js";import"./AddCustomEmojiDialog-DTXNQbPr.js";const X=({onClose:a})=>{var h;k();const{myProfile:t,mutate:e}=w(),o=O({defaultValues:{custom_status:(h=t==null?void 0:t.custom_status)!=null?h:""}}),{register:p,handleSubmit:_,formState:{errors:c}}=o,{call:S,loading:u,error:f}=$("raven.api.raven_users.update_raven_user"),v=i=>{S({custom_status:i.custom_status}).then(()=>{I.success(r("User status updated")),e(),a()})},b=i=>{o.setValue("custom_status",`${o.getValues("custom_status")} ${i}`)},[d,E]=B.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(N,{children:r("Set a custom status")}),s.jsx(P,m(l({},o),{children:s.jsxs("form",{onSubmit:_(v),children:[s.jsx(U,{error:f}),s.jsxs(n,{direction:"column",gap:"2",children:[s.jsx(z,{size:"2",color:"gray",weight:"regular",htmlFor:"custom_status",children:r("Share what you're up to")}),s.jsx(n,{align:"center",gap:"3",children:s.jsxs(n,{direction:"column",gap:"1",children:[s.jsx(D,m(l({id:"custom_status",autoFocus:!0,placeholder:"e.g. Out of Office",maxLength:140},p("custom_status",{maxLength:{value:140,message:r("Status cannot be more than {0} characters.",140)}})),{className:"min-w-[21rem]","aria-invalid":c.custom_status?"true":"false",children:s.jsx(R,{side:"right",children:s.jsx(T,{type:"button",className:"rounded-full",onClick:()=>E(!d),variant:"ghost",color:"gray",children:s.jsx(q,{size:"18"})})})})),c.custom_status&&s.jsx(A,{children:c.custom_status.message})]})}),d&&s.jsx(J,{onSelect:b})]}),s.jsxs(n,{gap:"3",mt:"6",justify:"end",align:"center",children:[s.jsx(G,{disabled:u,children:s.jsx(g,{variant:"soft",color:"gray",children:r("Cancel")})}),s.jsxs(g,{type:"submit",disabled:u,children:[u&&s.jsx(H,{className:"text-white"}),u?r("Saving"):r("Save")]})]})]})}))]})};export{X as default};
