var L=Object.defineProperty,f=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var p=(s,i,e)=>i in s?L(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e,h=(s,i)=>{for(var e in i||(i={}))S.call(i,e)&&p(s,e,i[e]);if(x)for(var e of x(i))k.call(i,e)&&p(s,e,i[e]);return s},g=(s,i)=>f(s,b(i));var j=(s,i,e)=>new Promise((o,t)=>{var m=n=>{try{l(e.next(n))}catch(r){t(r)}},d=n=>{try{l(e.throw(n))}catch(r){t(r)}},l=n=>n.done?o(n.value):Promise.resolve(n.value).then(m,d);l((e=e.apply(s,i)).next())});import{u as C,r as y,V as q,j as a,E as w,p as V,a as c,L as v,b as A,c as B,o as F,d as P,e as R,f as _}from"./index-DnEovQPS.js";import{S as z}from"./SuccessCallout-DA_5DFEC.js";import{i as I}from"./validations-DJFqvO1k.js";import{A as N}from"./AuthContainer-DsMbHVW4.js";const T=()=>{var r;const{register:s,handleSubmit:i,formState:{errors:e,isSubmitting:o}}=C(),[t,m]=y.useState(null),{call:d,error:l}=q("frappe.www.login.send_login_link");function n(u){return j(this,null,function*(){return d({email:u.email}).then(E=>{m({state:!0,message:"Login Link sent on Email"})}).catch(E=>{m(null)})})}return a.jsxs(N,{children:[l&&a.jsx(w,{error:l}),t&&a.jsx(z,{message:t.message}),a.jsx(V,{children:a.jsx("form",{onSubmit:i(n),children:a.jsxs(c,{direction:"column",gap:"4",children:[a.jsxs(c,{direction:"column",gap:"2",children:[a.jsx(v,{htmlFor:"email",isRequired:!0,children:"Email"}),a.jsx(A,g(h({},s("email",{validate:u=>I(u)||"Please enter a valid email address.",required:"Email is required."})),{name:"email",type:"email",placeholder:"jane@example.com",tabIndex:0})),(e==null?void 0:e.email)&&a.jsx(B,{children:(r=e==null?void 0:e.email)==null?void 0:r.message})]}),a.jsx(c,{direction:"column",gap:"2",children:a.jsx(F,{type:"submit",disabled:o,children:o?a.jsx(P,{}):"Send Login Link"})}),a.jsx(c,{direction:"column",gap:"1",align:"center",children:a.jsx(R,{size:"2",asChild:!0,children:a.jsx(_,{to:"/login",children:"Back to Login"})})})]})})})]})};T.displayName="LoginWithEmailPage";export{T as Component};
