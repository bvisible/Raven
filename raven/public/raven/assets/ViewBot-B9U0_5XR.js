var g=Object.defineProperty,f=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var d=(e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t)=>{for(var s in t||(t={}))S.call(t,s)&&d(e,s,t[s]);if(l)for(var s of l(t))C.call(t,s)&&d(e,s,t[s]);return e},u=(e,t)=>f(e,y(t));import{bx as B,by as E,j as a,E as x,F as k,ah as F,u as _,r as h,ai as w,ax as L,o as b,d as N,h as P,bm as A,Q as D,Y as R,bK as V,a3 as K}from"./index-93kECIxS.js";import{B as $}from"./BotForm-B-k70tcQ.js";import{C as H}from"./CommonSettingsMenu-C2aFC3AS.js";import{P as O,S as W,a as I}from"./SettingsContentContainer-Df6uZS-7.js";import{a as M}from"./validations-DJFqvO1k.js";import"./InstructionField-Egr98-lo.js";import"./table-T-ViWfBG.js";import"./radio-cards-BK-ic2ze.js";import"./useRavenSettings-3Tg7OUeN.js";import"./AINotEnabledCallout-DHulyDzA.js";import"./CodeBlock-BlWzNEkz.js";import"./index-D8MEszt3.js";/* empty css                      */import"./FileSourceUploadDialog-CyolLiZp.js";import"./TableLoader-D_IweTEt.js";import"./Skeleton-DlHB_Jmw.js";import"./skeleton-C4uoHUPj.js";import"./tabs-DsY8ua36.js";import"./DeleteAlert-CjKv61hf.js";const Q=e=>{const{ID:t}=B(),{data:s,isLoading:r,error:i,mutate:o}=E("Raven Bot",t);return a.jsxs(O,{children:[a.jsx(x,{error:i}),r&&a.jsx(k,{className:"h-64"}),s&&a.jsx(T,{data:s,mutate:o})]})},T=({data:e,mutate:t})=>{const{updateDoc:s,loading:r,error:i}=F(),o=_({disabled:r,defaultValues:e}),{formState:{dirtyFields:v}}=o,j=!M(v),c=m=>{s("Raven Bot",m.name,m).then(n=>{K.success("Saved"),o.reset(n),t(n,{revalidate:!1})})};return h.useEffect(()=>{const m=n=>{n.key==="s"&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),o.handleSubmit(c)())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[]),a.jsx("form",{onSubmit:o.handleSubmit(c),children:a.jsx(w,u(p({},o),{children:a.jsxs(W,{children:[a.jsx(I,{title:e.bot_name,headerBadges:j?[{label:"Not Saved",color:"red"}]:void 0,actions:a.jsxs(L,{children:[a.jsx(H,{doctype:"Raven Bot",docname:e.name,label:"Agent"}),a.jsx(U,{bot:e}),a.jsxs(b,{type:"submit",disabled:r,children:[r&&a.jsx(N,{className:"text-white"}),r?"Saving":"Save"]})]}),breadcrumbs:[{label:"Agents",href:"../"},{label:e.name,href:"",copyToClipboard:!0}]}),a.jsx(x,{error:i}),a.jsx($,{isEdit:!0})]})}))})},U=({bot:e})=>{const{call:t}=h.useContext(P),s=A(),r=D(R),i=()=>{t.post("raven.api.raven_channel.create_direct_message_channel",{user_id:e.raven_user}).then(o=>{s(r?`/${r}/${o.message}`:`/channel/${o.message}`)})};return a.jsxs(b,{variant:"surface",color:"gray",type:"button",className:"not-cal",onClick:i,children:["Open Chat",a.jsx(V,{})]})},ue=Q;export{ue as Component};
